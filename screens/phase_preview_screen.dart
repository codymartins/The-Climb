import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

class PhasePreviewScreen extends StatelessWidget {
  final int phaseNumber;
  final bool unlocked;

  const PhasePreviewScreen({super.key, required this.phaseNumber, required this.unlocked});

  Future<void> _startPhase(BuildContext context) async {
    final prefs = await SharedPreferences.getInstance();
    await prefs.setInt('currentPhase', phaseNumber);
    await prefs.setInt('phase${phaseNumber}Day', 0); // start at day 1
    await prefs.setInt('phase${phaseNumber}Streak', 0); // optional reset
    Navigator.pop(context);
  }

  @override
  Widget build(BuildContext context) {
    Widget phaseContent;

    if (phaseNumber == 1) {
      phaseContent = Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            "üî• Phase 1: Awakening to Potential",
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 16),
          const Text(
            "üß† See the Truth. Start the Climb.",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "This phase is about waking up ‚Äî seeing the gap between who you are and who you could be.\n"
            "You‚Äôll confront your environment, your habits, and your mindset to ignite real change.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "üö® Why It Matters",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "You‚Äôve been asleep at the wheel. This phase forces clarity.\n"
            "No more drifting ‚Äî only purpose, honesty, and momentum.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚öôÔ∏è What You‚Äôll Do",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "‚Ä¢ Journal hard truths about who you are\n"
            "‚Ä¢ Cut distractions and audit your media\n"
            "‚Ä¢ Write your vision of the man you‚Äôre meant to become\n"
            "‚Ä¢ Ask daily: ‚ÄúWhat would make me proud today?‚Äù\n"
            "‚Ä¢ Clean your space to reflect your higher standards",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚õ∞Ô∏è This is where it begins.\nGet clear. Get uncomfortable. Get moving.",
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600),
          ),
        ],
      );
    } else if (phaseNumber == 2) {
      phaseContent = Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            "üß± Phase 2: Discipline & Structure",
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 16),
          const Text(
            "üîÅ Build Systems. Become Relentless.",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "Now it's about showing up, every day.\n"
            "You‚Äôll create structure, fight excuses, and train your mind to move with discipline ‚Äî not emotion.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚ö†Ô∏è Why It Matters",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "Potential without structure is wasted.\n"
            "This phase turns your vision into daily execution. No more chaos. No more negotiating with yourself.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚öôÔ∏è What You‚Äôll Do",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "‚Ä¢ Build simple, repeatable routines\n"
            "‚Ä¢ Track your execution ‚Äî ‚úÖ or ‚ùå, no fluff\n"
            "‚Ä¢ Rest with intention, not to escape\n"
            "‚Ä¢ Finish before you celebrate\n"
            "‚Ä¢ Crush excuses before they take root",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "ü™µ This is where the work gets real.\nDiscipline isn‚Äôt a feeling ‚Äî it‚Äôs a system.",
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600),
          ),
        ],
      );
    } else if (phaseNumber == 3) {
      phaseContent = Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            "üöÄ Phase 3: Progress Over Perfection",
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 16),
          const Text(
            "üßó‚Äç‚ôÇÔ∏è Take the Step. Stop Waiting.",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "This phase is about momentum, not mastery.\n"
            "You‚Äôll silence perfectionism, embrace imperfect action, and keep climbing ‚Äî even when it‚Äôs messy.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚ö†Ô∏è Why It Matters",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "Perfection is the enemy of progress.\n"
            "You don‚Äôt need flawless days ‚Äî you need forward motion. This phase teaches you to move anyway.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚öôÔ∏è What You‚Äôll Do",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "‚Ä¢ Finish before you feel ready\n"
            "‚Ä¢ Log real wins ‚Äî even the small ones\n"
            "‚Ä¢ Act today, not ‚Äútomorrow‚Äù\n"
            "‚Ä¢ Bounce back fast from failure\n"
            "‚Ä¢ Fall in love with the process, not the end",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "ü•æ This is where grit is built.\nYou won‚Äôt be perfect ‚Äî but you will get better.",
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600),
          ),
        ],
      );
    } else if (phaseNumber == 4) {
      phaseContent = Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            "üßò Phase 4: Inner Freedom",
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 16),
          const Text(
            "üïäÔ∏è Master Yourself. Silence the Noise.",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "This phase is about becoming unshakable ‚Äî no longer ruled by urges, distractions, or outside approval.\n"
            "You‚Äôll build clarity, stillness, and strength from within.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚ö†Ô∏è Why It Matters",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "A man ruled by chaos is never free.\n"
            "When you master your emotions and detach from the world‚Äôs grip, you unlock a deeper power: self-possession.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚öôÔ∏è What You‚Äôll Do",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "‚Ä¢ Practice solitude without distractions\n"
            "‚Ä¢ Reflect daily on your integrity\n"
            "‚Ä¢ Pause before reacting to emotion\n"
            "‚Ä¢ Own your identity ‚Äî no more blaming others\n"
            "‚Ä¢ Replace inner weakness with strength-building habits",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "ü™® This is where freedom begins.\nStill mind. Strong will. Unshakable soul.",
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600),
          ),
        ],
      );
    } else if (phaseNumber == 5) {
      phaseContent = Column(
        crossAxisAlignment: CrossAxisAlignment.start,
        children: [
          const Text(
            "ü§ù Phase 5: Becoming Useful & Compassionate",
            style: TextStyle(fontSize: 24, fontWeight: FontWeight.bold),
          ),
          const SizedBox(height: 16),
          const Text(
            "üåç Live Beyond Yourself. Lead With Strength.",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "This phase is about service, humility, and legacy.\n"
            "You‚Äôll use what you‚Äôve built ‚Äî not to dominate, but to uplift others with purpose and compassion.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚ö†Ô∏è Why It Matters",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "The highest form of strength is service.\n"
            "Without giving back, even greatness feels hollow. This phase fills your life with meaning that endures.",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "‚öôÔ∏è What You‚Äôll Do",
            style: TextStyle(fontSize: 18, fontWeight: FontWeight.w600),
          ),
          const SizedBox(height: 8),
          const Text(
            "‚Ä¢ Lighten someone‚Äôs load every day\n"
            "‚Ä¢ Lead by example, not ego\n"
            "‚Ä¢ Own your influence in every room\n"
            "‚Ä¢ Celebrate quietly ‚Äî lift, don‚Äôt boast\n"
            "‚Ä¢ Reflect weekly: ‚ÄúWho did I help?‚Äù",
            style: TextStyle(fontSize: 16),
          ),
          const SizedBox(height: 16),
          const Text(
            "üå± This is where impact begins.\nStrength becomes legacy. Power becomes purpose.",
            style: TextStyle(fontSize: 16, fontWeight: FontWeight.w600),
          ),
        ],
      );
    } else {
      phaseContent = const Center(child: Text('Preview not available for this phase yet.'));
    }

    return Scaffold(
      appBar: AppBar(title: Text('Phase $phaseNumber Preview')),
      body: Padding(
        padding: const EdgeInsets.all(20.0),
        child: Column(
          children: [
            Expanded(
              child: SingleChildScrollView(
                child: phaseContent,
              ),
            ),
            const SizedBox(height: 20),
            if (unlocked)
              ElevatedButton(
                onPressed: () => _startPhase(context),
                child: const Text("Start This Phase"),
              ),
            const SizedBox(height: 12),
            OutlinedButton(
              onPressed: () => Navigator.pop(context),
              child: const Text("Back"),
            ),
          ],
        ),
      ),
    );
  }
}
